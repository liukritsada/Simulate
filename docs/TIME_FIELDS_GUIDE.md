# Time Fields Usage Guide

‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Time Fields ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Hospital Patient Flow Simulator

---

## Patient Time Fields

### 1. **appointment_date** (DATE)
- **Purpose**: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢
- **Set by**: ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á appointment
- **Example**: `'2026-01-26'`
- **Usage**: ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô base date ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì

### 2. **arrival_time** (TIME) ‚≠ê ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏°‡∏≤‡∏ñ‡∏∂‡∏á (check-in)
- **Set by**: ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ check-in
- **Used for**: **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠** (Waiting Time)
- **Example**: `'09:30:00'`
- **Formula**:
  ```
  waiting_time = current_time - arrival_time
  ```

### 3. **time_start** (TIME)
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏´‡∏±‡∏ï‡∏ñ‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á
- **Set by**: ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏Å‡∏©‡∏≤
- **Used for**:
  - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì actual procedure time
  - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤"
- **Example**: `'09:45:00'`

### 4. **time_target** (TIME)
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à
- **Set by**: ‡∏£‡∏∞‡∏ö‡∏ö (calculated)
- **Formula**:
  ```
  time_target = time_start + procedure_time
  ```
- **Example**: `'10:15:00'`

### 5. **expected_wait_time** (INT)
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ô‡∏≤‡∏ó‡∏µ)
- **Set by**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏≤‡∏°‡∏Ñ‡∏¥‡∏ß‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
- **Unit**: ‡∏ô‡∏≤‡∏ó‡∏µ (minutes)
- **Example**: `15` (‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á 15 ‡∏ô‡∏≤‡∏ó‡∏µ)
- **Default**: `15` ‡∏ô‡∏≤‡∏ó‡∏µ

### 6. **Actual_Time** (TIME)
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á
- **Set by**: ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠ complete procedure
- **Example**: `'10:20:00'`
- **Used for**: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå performance

### 7. **Actual_wait** (TIME)
- **Purpose**: ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
- **Set by**: ‡∏£‡∏∞‡∏ö‡∏ö (calculated)
- **Formula**:
  ```
  Actual_wait = time_start - arrival_time
  ```
- **Example**: `'00:15:00'` (15 ‡∏ô‡∏≤‡∏ó‡∏µ)

---

## Time Flow Diagram

```
Patient Journey:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  appointment_date  ‚îÇ  arrival_time  ‚îÇ  time_start  ‚îÇ  Actual_Time  ‚îÇ
‚îÇ   (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î)      ‚îÇ  (‡∏°‡∏≤‡∏ñ‡∏∂‡∏á)       ‚îÇ  (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥)    ‚îÇ  (‡πÄ‡∏™‡∏£‡πá‡∏à)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ                ‚îÇ              ‚îÇ
                      ‚ñº                ‚ñº              ‚ñº
                   [‡∏£‡∏≠‡∏Ñ‡∏¥‡∏ß]         [‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥]      [‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô]
                      ‚îÇ                ‚îÇ
                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         Actual_wait
```

---

## Status Based on Time

### Waiting (‡∏£‡∏≠‡∏Ñ‡∏¥‡∏ß)
- **Condition**: ‡∏°‡∏µ `arrival_time` ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ `time_start`
- **Display**: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠ ‡∏û‡∏£‡πâ‡∏≠‡∏° emoji ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:
  - üòä ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß: ‡∏£‡∏≠ ‚â§ 15 ‡∏ô‡∏≤‡∏ó‡∏µ
  - üòê ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á: ‡∏£‡∏≠ 16-30 ‡∏ô‡∏≤‡∏ó‡∏µ
  - üòï ‡∏™‡πâ‡∏°: ‡∏£‡∏≠ 31-60 ‡∏ô‡∏≤‡∏ó‡∏µ
  - üò† ‡πÅ‡∏î‡∏á: ‡∏£‡∏≠ > 60 ‡∏ô‡∏≤‡∏ó‡∏µ

### In Process (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥)
- **Condition**: ‡∏°‡∏µ `time_start` ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ `Actual_Time`
- **Display**: ‚öïÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤ (‡∏™‡∏µ‡∏™‡πâ‡∏°)

### Completed (‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô)
- **Condition**: ‡∏°‡∏µ `Actual_Time`
- **Display**: ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô (‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)

---

## Code Examples

### JavaScript (Frontend)
```javascript
// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠
function getWaitingTimeStatus(appointmentDate, arrivalTime, startTime) {
    // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏´‡∏±‡∏ï‡∏ñ‡∏Å‡∏≤‡∏£
    if (startTime) {
        return { emoji: '‚öïÔ∏è', text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤' };
    }

    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡πâ‡∏ß - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å arrival_time
    if (arrivalTime) {
        const referenceTime = new Date(appointmentDate + 'T' + arrivalTime).getTime();
        const now = new Date().getTime();
        const diffMinutes = Math.floor((now - referenceTime) / 60000);

        if (diffMinutes <= 15) {
            return { emoji: 'üòä', text: `‡∏£‡∏≠ ${diffMinutes} ‡∏ô‡∏≤‡∏ó‡∏µ` };
        }
        // ... more conditions
    }

    return { emoji: '‚è≥', text: '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏ñ‡∏∂‡∏á' };
}
```

### PHP (Backend)
```php
// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì time_target
$time_target = date('H:i:s', strtotime($time_start) + ($procedure_time * 60));

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Actual_wait
$arrival = strtotime($arrival_time);
$start = strtotime($time_start);
$actual_wait_seconds = $start - $arrival;
$actual_wait = gmdate('H:i:s', $actual_wait_seconds);
```

---

## Best Practices

### ‚úÖ DO:
- ‡πÉ‡∏ä‡πâ `arrival_time` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠
- ‡πÉ‡∏ä‡πâ `time_start` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏´‡∏±‡∏ï‡∏ñ‡∏Å‡∏≤‡∏£
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å `Actual_Time` ‡πÅ‡∏•‡∏∞ `Actual_wait` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå

### ‚ùå DON'T:
- ~~‡πÉ‡∏ä‡πâ `time_start` ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠~~ (‡∏ú‡∏¥‡∏î!)
- ~~‡πÉ‡∏ä‡πâ `appointment_date` ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì~~
- ~~‡∏•‡∏∑‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å `arrival_time` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ check-in~~

---

## Database Comments

‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏°‡∏µ comments ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞ field:

```sql
ALTER TABLE `patients`
  MODIFY `arrival_time` TIME COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏°‡∏≤‡∏ñ‡∏∂‡∏á - ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠',
  MODIFY `time_start` TIME COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏´‡∏±‡∏ï‡∏ñ‡∏Å‡∏≤‡∏£‡∏à‡∏£‡∏¥‡∏á',
  MODIFY `time_target` TIME COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à',
  MODIFY `expected_wait_time` INT COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ô‡∏≤‡∏ó‡∏µ)',
  MODIFY `Actual_Time` TIME COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏£‡∏¥‡∏á',
  MODIFY `Actual_wait` TIME COMMENT '‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏à‡∏£‡∏¥‡∏á';
```

---

## Migration Scripts

‡∏î‡∏π migration scripts ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:
- `migrations/002_add_time_field_comments.sql` - ‡πÄ‡∏û‡∏¥‡πà‡∏° comments ‡πÉ‡∏´‡πâ fields

---

**Last Updated**: 2026-01-26
**Version**: 1.0
